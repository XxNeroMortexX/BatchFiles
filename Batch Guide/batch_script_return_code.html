<!DOCTYPE html>
<html lang="en-US">
<head>
<title>Batch Script Tutorial</title>
<meta charset="utf-8">
<link id="style-switch" rel="stylesheet" href="css/style-min.css">
<link rel="stylesheet" href="css/custom.css">
<style>.navbar-expand-xl .navbar-brand .navbar-brand-item, .h-100px, ul.toc li.heading, .light-mode-item, .dark-mode-item, .back-top, a.demo, .home-intro-sub{background:#17c06a; color:#fff;}  ul.toc li.heading:hover{background:#17c06a;} .btn-grey-border{background:#17c06a; color:#fff; border:1px solid #17c06a;} .course-box{background:#17c06a;} 
</style>
</head>
<body>



<main class="bg-light pb-4">
<div class="container-fluid mt-3 px-3 px-xl-3">
<div class="row g-4">
<div class="col-sm-12 col-md-4 col-xl-3 ps-0 pe-0 collapse tutorial-toc" id="tocCollapse">
<div class="card card-body bg-light pt-0">
<ul class="toc chapters">
<li class="heading">Batch Script Tutorial</li>
<li><a href="index-2.html">Batch Script - Home</a></li>
<li><a href="batch_script_overview.html">Batch Script - Overview</a></li>
<li><a href="batch_script_environment.html">Batch Script - Environment</a></li>
<li><a href="batch_script_commands.html">Batch Script - Commands</a></li>
<li><a href="batch_script_files.html">Batch Script - Files</a></li>
<li><a href="batch_script_syntax.html">Batch Script - Syntax</a></li>
<li><a href="batch_script_variables.html">Batch Script - Variables</a></li>
<li><a href="batch_script_comments.html">Batch Script - Comments</a></li>
<li><a href="batch_script_strings.html">Batch Script - Strings</a></li>
<li><a href="batch_script_arrays.html">Batch Script - Arrays</a></li>
<li><a href="batch_script_decision_making.html">Batch Script - Decision Making</a></li>
<li><a href="batch_script_operators.html">Batch Script - Operators</a></li>
<li><a href="batch_script_date_time.html">Batch Script - DATE &amp; TIME</a></li>
<li><a href="batch_script_input_output.html">Batch Script - Input / Output</a></li>
<li><a href="batch_script_return_code.html">Batch Script - Return Code</a></li>
<li><a href="batch_script_functions.html">Batch Script - Functions</a></li>
<li><a href="batch_script_process.html">Batch Script - Process</a></li>
<li><a href="batch_script_aliases.html">Batch Script - Aliases</a></li>
<li><a href="batch_script_devices.html">Batch Script - Devices</a></li>
<li><a href="batch_script_registry.html">Batch Script - Registry</a></li>
<li><a href="batch_script_network.html">Batch Script - Network</a></li>
<li><a href="batch_script_printing.html">Batch Script - Printing</a></li>
<li><a href="batch_script_debugging.html">Batch Script - Debugging</a></li>
<li><a href="batch_script_logging.html">Batch Script - Logging</a></li>
</ul>
<ul class="toc chapters">
<li class="heading">Batch Script Resources</li>
<li><a href="batch_script_quick_guide.html">Batch Script - Quick Guide</a></li>
</ul>
</div>
</div>
<!-- Tutorial ToC Ends Here -->


<!-- Tutorial Content Starts Here -->
<div class="col-sm-12 col-md-8 col-xl-6 rounded-3 tutorial-content" id="mainContent">

<h1>Batch Script - Return Code</h1>
<hr />

<br>
<div class="mui-container-fluid button-borders">
<div class="pre-btn">
<a href="batch_script_input_output.html"><i class="fal fa-chevron-circle-left"></i> Previous Page</a>
</div>
<div class="nxt-btn">
<a href="batch_script_functions.html">Next Page <i class="fal fa-chevron-circle-right"></i>&nbsp;</a>
</div>
</div>

<div class="clearer"></div>
<p>By default when a command line execution is completed it should either return zero when execution succeeds or non-zero when execution fails. When a batch script returns a non-zero value after the execution fails, the non-zero value will indicate what is the error number. We will then use the error number to determine what the error is about and resolve it accordingly.</p>
<p>Following are the common exit code and their description.</p>
<table class="table table-bordered">
<tr>
<th>Error Code</th>
<th style="text-align:center;">Description</th>
</tr>
<tr>
<td style="text-align:center;">0</td>
<td>Program successfully completed.</td>
</tr>
<tr>
<td style="text-align:center;">1</td>
<td>Incorrect function. Indicates that Action has attempted to execute non-recognized command in Windows command prompt cmd.exe.</td>
</tr>
<tr>
<td style="text-align:center;">2</td>
<td>The system cannot find the file specified. Indicates that the file cannot be found in specified location.</td>
</tr>
<tr>
<td style="text-align:center;">3</td>
<td>The system cannot find the path specified. Indicates that the specified path cannot be found.</td>
</tr>
<tr>
<td style="text-align:center;">5</td>
<td>Access is denied. Indicates that user has no access right to specified resource.</td>
</tr>
<tr>
<td>
<p style="text-align:center;">9009</p>
<p style="text-align:center;">0x2331</p>
</td>
<td>Program is not recognized as an internal or external command, operable program or batch file. Indicates that command, application name or path has been misspelled when configuring the Action.</td>
</tr>
<tr>
<td>
<p style="text-align:center;">221225495</p>
<p style="text-align:center;">0xC0000017</p>
<p style="text-align:center;">-1073741801</p>
</td>
<td>
<p>Not enough virtual memory is available.</p>
<p>It indicates that Windows has run out of memory.</p>
</td>
</tr>
<tr>
<td>
<p style="text-align:center;">3221225786</p>
<p style="text-align:center;">0xC000013A</p>
<p style="text-align:center;">-1073741510</p>
</td>
<td>The application terminated as a result of a CTRL+C. Indicates that the application has been terminated either by the user's keyboard input CTRL+C or CTRL+Break or closing command prompt window.</td>
</tr>
<tr>
<td>
<p style="text-align:center;">3221225794</p>
<p style="text-align:center;">0xC0000142</p>
<p style="text-align:center;">-1073741502</p>
</td>
<td>The application failed to initialize properly. Indicates that the application has been launched on a Desktop to which the current user has no access rights. Another possible cause is that either gdi32.dll or user32.dll has failed to initialize.</td>
</tr>
</table>
<h2>Error Level</h2>
<p>The environmental variable %ERRORLEVEL% contains the return code of the last executed program or script.</p>
<p>By default, the way to check for the ERRORLEVEL is via the following code.</p>
<h3>Syntax</h3>
<pre class="result notranslate">
IF %ERRORLEVEL% NEQ 0 ( 
   DO_Something 
)
</pre>
<p>It is common to use the command EXIT /B %ERRORLEVEL% at the end of the batch file to return the error codes from the batch file.</p>
<p>EXIT /B at the end of the batch file will stop execution of a batch file.</p>
<p>Use EXIT /B &lt; exitcodes &gt; at the end of the batch file to return custom return codes.</p>
<p>Environment variable %ERRORLEVEL% contains the latest errorlevel in the batch file, which is the latest error codes from the last command executed. In the batch file, it is always a good practice to use environment variables instead of constant values, since the same variable get expanded to different values on different computers.</p>
<p>Let’s look at a quick example on how to check for error codes from a batch file.</p>
<h3>Example</h3>
<p>Let’s assume we have a batch file called Find.cmd which has the following code. In the code, we have clearly mentioned that we if don’t find the file called lists.txt then we should set the errorlevel to 7. Similarly, if we see that the variable userprofile is not defined then we should set the errorlevel code to 9.</p>
<pre class="prettyprint notranslate">
if not exist c:\lists.txt exit 7 
if not defined userprofile exit 9 
exit 0
</pre>
<p>Let’s assume we have another file called App.cmd that calls Find.cmd first. Now, if the Find.cmd returns an error wherein it sets the errorlevel to greater than 0 then it would exit the program. In the following batch file, after calling the Find.cnd find, it actually checks to see if the errorlevel is greater than 0.</p>
<pre class="prettyprint notranslate">
Call Find.cmd

if errorlevel gtr 0 exit 
echo “Successful completion”
</pre>
<h3>Output</h3>
<p>In the above program, we can have the following scenarios as the output &minus;</p>
<ul class="list">
<li><p>If the file c:\lists.txt does not exist, then nothing will be displayed in the console output.</p></li>
<li><p>If the variable userprofile does not exist, then nothing will be displayed in the console output.</p></li>
<li><p>If both of the above condition passes then the string “Successful completion” will be displayed in the command prompt.</p></li>
</ul>
<h2>Loops</h2>
<p>In the decision making chapter, we have seen statements which have been executed one after the other in a sequential manner. Additionally, implementations can also be done in Batch Script to alter the flow of control in a program’s logic. They are then classified into flow of control statements.</p>
<table class="table table-bordered">
<tr>
<th>S.No</th>
<th style="text-align:center;">Loops &amp; Description</th>
</tr>
<tr>
<td class="ts">1</td>
<td><a href="batch_script_while_statement_implementation.html">While Statement Implementation</a>
<p>There is no direct while statement available in Batch Script but we can do an implementation of this loop very easily by using the if statement and labels.</p>
</td>
</tr>
<tr>
<td class="ts">2</td>
<td><a href="batch_script_for_statement_implementations.html">For Statement - List Implementations</a>
<p>The "FOR" construct offers looping capabilities for batch files. Following is the common construct of the ‘for’ statement for working with a list of values.</p>
</td>
</tr>
<tr>
<td class="ts">3</td>
<td><a href="batch_script_looping_through_ranges.html">Looping through Ranges</a>
<p>The ‘for’ statement also has the ability to move through a range of values. Following is the general form of the statement.</p>
</td>
</tr>
<tr>
<td class="ts">4</td>
<td><a href="batch_script_classic_loop_implementationn.html">Classic for Loop Implementation</a>
<p>Following is the classic ‘for’ statement which is available in most programming languages.</p>
</td>
</tr>
</table>
<h2>Looping through Command Line Arguments</h2>
<p>The ‘for’ statement can also be used for checking command line arguments. The following example shows how the ‘for’ statement can be used to loop through the command line arguments.</p>
<h3>Example</h3>
<pre class="prettyprint notranslate">
&commat;ECHO OFF 
:Loop 

IF "%1"=="" GOTO completed 
FOR %%F IN (%1) DO echo %%F 
SHIFT 
GOTO Loop 
:completed
</pre>
<h3>Output</h3>
<p>Let’s assume that our above code is stored in a file called Test.bat. The above command will produce the following output if the batch file passes the command line arguments of 1,2 and 3 as Test.bat 1 2 3.</p>
<pre class="result notranslate">
1 
2 
3
</pre>
<p></p>
<table class="table table-bordered">
<tr>
<th>S.No</th>
<th style="text-align:center;">Loops &amp; Description</th>
</tr>
<tr>
<td class="ts">1</td>
<td><a href="batch_script_break_statement_implementation.html">Break Statement Implementation</a>
<p>The break statement is used to alter the flow of control inside loops within any programming language. The break statement is normally used in looping constructs and is used to cause immediate termination of the innermost enclosing loop.</p>
</td>
</tr>
</table>
<div class="d-flex justify-content-between border-bottom border-top py-2" id="bottom_navigation">
<a href="batch_script_input_output.html" class="pre-btn"><i class="fal fa-chevron-circle-left"></i> Previous Page</a>
<a id="print-page" href="#" class="pre-btn d-none d-sm-block"><i class="fal fa-print"></i> Print Page</a>
<a href="batch_script_functions.html" class="nxt-btn">Next Page <i class="fal fa-chevron-circle-right"></i>&nbsp;</a>
</div>

</body>

<!-- Mirrored from www.tutorialspoint.com/batch_script/batch_script_return_code.htm by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Sep 2022 22:54:41 GMT -->
</html>
