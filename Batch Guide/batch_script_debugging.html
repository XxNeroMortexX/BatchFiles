<!DOCTYPE html>
<html lang="en-US">
<head>
<title>Batch Script Tutorial</title>
<meta charset="utf-8">
<link id="style-switch" rel="stylesheet" href="css/style-min.css">
<link rel="stylesheet" href="css/custom.css">
<style>.navbar-expand-xl .navbar-brand .navbar-brand-item, .h-100px, ul.toc li.heading, .light-mode-item, .dark-mode-item, .back-top, a.demo, .home-intro-sub{background:#17c06a; color:#fff;}  ul.toc li.heading:hover{background:#17c06a;} .btn-grey-border{background:#17c06a; color:#fff; border:1px solid #17c06a;} .course-box{background:#17c06a;} 
</style>
</head>
<body>



<main class="bg-light pb-4">
<div class="container-fluid mt-3 px-3 px-xl-3">
<div class="row g-4">
<div class="col-sm-12 col-md-4 col-xl-3 ps-0 pe-0 collapse tutorial-toc" id="tocCollapse">
<div class="card card-body bg-light pt-0">
<ul class="toc chapters">
<li class="heading">Batch Script Tutorial</li>
<li><a href="index-2.html">Batch Script - Home</a></li>
<li><a href="batch_script_overview.html">Batch Script - Overview</a></li>
<li><a href="batch_script_environment.html">Batch Script - Environment</a></li>
<li><a href="batch_script_commands.html">Batch Script - Commands</a></li>
<li><a href="batch_script_files.html">Batch Script - Files</a></li>
<li><a href="batch_script_syntax.html">Batch Script - Syntax</a></li>
<li><a href="batch_script_variables.html">Batch Script - Variables</a></li>
<li><a href="batch_script_comments.html">Batch Script - Comments</a></li>
<li><a href="batch_script_strings.html">Batch Script - Strings</a></li>
<li><a href="batch_script_arrays.html">Batch Script - Arrays</a></li>
<li><a href="batch_script_decision_making.html">Batch Script - Decision Making</a></li>
<li><a href="batch_script_operators.html">Batch Script - Operators</a></li>
<li><a href="batch_script_date_time.html">Batch Script - DATE &amp; TIME</a></li>
<li><a href="batch_script_input_output.html">Batch Script - Input / Output</a></li>
<li><a href="batch_script_return_code.html">Batch Script - Return Code</a></li>
<li><a href="batch_script_functions.html">Batch Script - Functions</a></li>
<li><a href="batch_script_process.html">Batch Script - Process</a></li>
<li><a href="batch_script_aliases.html">Batch Script - Aliases</a></li>
<li><a href="batch_script_devices.html">Batch Script - Devices</a></li>
<li><a href="batch_script_registry.html">Batch Script - Registry</a></li>
<li><a href="batch_script_network.html">Batch Script - Network</a></li>
<li><a href="batch_script_printing.html">Batch Script - Printing</a></li>
<li><a href="batch_script_debugging.html">Batch Script - Debugging</a></li>
<li><a href="batch_script_logging.html">Batch Script - Logging</a></li>
</ul>
<ul class="toc chapters">
<li class="heading">Batch Script Resources</li>
<li><a href="batch_script_quick_guide.html">Batch Script - Quick Guide</a></li>
</ul>
</div>
</div>
<!-- Tutorial ToC Ends Here -->


<!-- Tutorial Content Starts Here -->
<div class="col-sm-12 col-md-8 col-xl-6 rounded-3 tutorial-content" id="mainContent">

<h1>Batch Script - Debugging</h1>
<hr />

<br>
<div class="mui-container-fluid button-borders">
<div class="pre-btn">
<a href="batch_script_printing.html"><i class="fal fa-chevron-circle-left"></i> Previous Page</a>
</div>
<div class="nxt-btn">
<a href="batch_script_logging.html">Next Page <i class="fal fa-chevron-circle-right"></i>&nbsp;</a>
</div>
</div>

<div class="clearer"></div>
<p>Debugging a batch script becomes important when you are working on a big complex batch script.</p>
<p>Following are the ways in which you can debug the batch file.</p>
<h2>Using echo command </h2>
<p>A very simple debug option is to make use of echo command in your batch script wherever possible. It will display the message in the command prompt and help you debug where things have gone wrong.</p>
<p>Here is a simple example that displays even numbers based on the input given. The echo command is used to display the result and also if the input is not given. Similarly, the echo command can be used in place when you think that the error can happen. For example, if the input given is a negative number, less than 2, etc.</p>
<h2>Example</h2>
<pre class="prettyprint notranslate">
@echo off  
if [%1] == [] ( 
   echo input value not provided 
   goto stop 
)  
rem Display numbers 
for /l %%n in (2,2,%1) do ( 
   echo %%n 
)  
:stop 
pause 
</pre>
<h2>Output</h2>
<pre class="result notranslate">
C:\>test.bat 
10 
2 
4 
6 
8 
10 
22
Press any key to continue ... 
</pre>
<h2>Using pause command</h2>
<p>Another way is to pause the batch execution when there is an error. When the script is paused, the developer can fix the issue and restart the processing.</p>
<p>In the example below, the batch script is paused as the input value is mandatory and not provided.</p>
<h2>Example</h2>
<pre class="prettyprint notranslate">
@echo off  
if [%1] == [] ( 
   echo input value not provided 
   goto stop 
) else ( 
   echo "Valid value"     
)  
:stop 
pause 
</pre>
<h2>Output</h2>
<pre class="result notranslate">
C:\>test.bat 
 input value not provided 
Press any key to continue.. 
</pre>
<h2>Logging the error messages to another file</h2>
<p>It might get hard to debug the error just looking at a bunch of echo displayed on the command prompt. Another easy way out is to log those messages in another file and view it step by step to understand what went wrong.</p>
<p>Here is an example, consider the following test.bat file:</p>
<pre class="result notranslate">
net statistics /Server 
</pre>
<p>The command given in the .bat file is wrong. Let us log the message and see what we get.</p>
<p>Execute the following command in your command line:</p>
<pre class="result notranslate">
C:\>test.bat > testlog.txt 2> testerrors.txt
</pre>
<p>The file testerrors.txt will display the error messages as shown below:</p>
<pre class="result notranslate">
The option /SERVER is unknown.  
The syntax of this command is:  
NET STATISTICS 
[WORKSTATION | SERVER]  
More help is available by typing NET HELPMSG 3506.
</pre>
<p>Looking at the above file the developer can fix the program and execute again.</p>
<h2>Using ErrorLevel to detect errors and log them</h2>
<p>Errorlevel returns 0 if the command executes successfully and 1 if it fails.</p>
<p>Consider the following example:</p>
<pre class="result notranslate">
@echo off 
PING google.com  
if errorlevel 1 GOTO stop  
:stop 
   echo Unable to connect to google.com 
pause
</pre>
<p>During execution, you can see errors as well as logs:</p>
<pre class="result notranslate">
C:\>test.bat > testlog.txt
</pre>
<p><b>testlog.txt</b></p>
<pre class="result notranslate">
Pinging google.com [172.217.26.238] with 32 bytes of data: 
Reply from 172.217.26.238: bytes=32 time=160ms TTL=111 
Reply from 172.217.26.238: bytes=32 time=82ms TTL=111 
Reply from 172.217.26.238: bytes=32 time=121ms TTL=111 
Reply from 172.217.26.238: bytes=32 time=108ms TTL=111  
Ping statistics for 172.217.26.238: 
   Packets: Sent = 4, Received = 4, Lost = 0 (0% loss), 
Approximate round trip times in milli-seconds: 
   Minimum = 82ms, Maximum = 160ms, Average = 117ms
   Connected successfully 
Press any key to continue . . .
</pre>
<p>In case of failure, you will see the following logs inside testlog.txt.</p>
<pre class="result notranslate">
Ping request could not find host google.com. Please check the name and try again. 
Unable to connect to google.com 
Press any key to continue . . .
</pre><div class="d-flex justify-content-between border-bottom border-top py-2" id="bottom_navigation">
<a href="batch_script_printing.html" class="pre-btn"><i class="fal fa-chevron-circle-left"></i> Previous Page</a>
<a id="print-page" href="#" class="pre-btn d-none d-sm-block"><i class="fal fa-print"></i> Print Page</a>
<a href="batch_script_logging.html" class="nxt-btn">Next Page <i class="fal fa-chevron-circle-right"></i>&nbsp;</a>
</div>

</body>

<!-- Mirrored from www.tutorialspoint.com/batch_script/batch_script_debugging.htm by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Sep 2022 22:54:53 GMT -->
</html>
